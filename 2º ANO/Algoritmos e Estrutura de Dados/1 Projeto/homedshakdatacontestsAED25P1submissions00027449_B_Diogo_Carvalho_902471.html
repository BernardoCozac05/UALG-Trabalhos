<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Report of submission 00027449_B_Diogo_Carvalho_90247</title>
<link
rel	="stylesheet"
href	="../../styles/base.css"
type	="text/css">
</head>
<body>
<h2>Report #1</h2>

<table>
<tr>
<th>Submission</th>
<td>
<a href="?inspect+data/contests/AED25P1/submissions/00027449_B_Diogo_Carvalho_90247">00027449_B_Diogo_Carvalho_90247</a>
</td>
</tr>
<tr>
<th>File</th>
<td>
<a href="?inspect+data/contests/AED25P1/submissions/00027449_B_Diogo_Carvalho_90247/Scene.java">Scene.java</a>
<a href="data/contests/AED25P1/submissions/00027449_B_Diogo_Carvalho_90247/Scene.java">[Download]</a>
</td>

<tr><th>Received</td>	<td>Mon Sep 22 01:05:03 +0100 2025</td></tr>
<tr><th>Analyzed</td>	<td>Mon Sep 22 01:05:03 +0100 2025 (0:00:00)</td></tr><tr>
<th>Team</th>
<td>
<a href="?inspect+data/contests/AED25P1/groups/students/Diogo_Carvalho_90247">
Diogo_Carvalho_90247
</a> Login: <code>Diogo_Carvalho_90247</code> Group: students [students]
</td><tr>
<th>Language</th>
<td>
<a href="?inspect+data/contests/AED25P1/languages/Java">
Java
</a>
</td><tr>
<th>Problem</th>
<td>
<a href="?inspect+data/contests/AED25P1/problems/B">
B: Scene
</a>
</td><tr>
<th>Compilation</th>
<td></td>
</tr>
</table><p>
<table
border="1"
width="100%">
<tr>
<th>Test</th>
<th>Expected</th>
<th>Obtained</th>
<th>Differences</th>
</tr><tr>
<td valign="top">
<a href="?inspect+/home/dshak/data/contests/AED25P1/problems/B/tests/testB01">
testB01
</a><br>
T=0.060 sec<br>
E=0 sec<br>
M=183728 Kb<br>
<br>
</td>
<td valign="top"><pre>Debug<font size="-1">[]</font>Info:<font size="-1">[]</font>Testing<font size="-1">[]</font>constructor<font size="-1">[]</font>and<font size="-1">[]</font>simpler<font size="-1">[]</font>getters<font size="-1">\n
</font>0<font size="-1">\n
</font>NORMAL<font size="-1">\n
</font>A<font size="-1">[]</font>sua<font size="-1">[]</font>aventura,<font size="-1">[]</font>tal<font size="-1">[]</font>como<font size="-1">[]</font>a<font size="-1">[]</font>sua<font size="-1">[]</font>sanidade,<font size="-1">[]</font>chegou<font size="-1">[]</font>a<font size="-1">[]</font>um<font size="-1">[]</font>cruzamento.<font size="-1">\n
</font>a<font size="-1">[]</font>direita,<font size="-1">[]</font>a<font size="-1">[]</font>floresta<font size="-1">[]</font>das<font size="-1">[]</font>Sombras<font size="-1">[]</font>Eternas<font size="-1">[]</font>sussurra<font size="-1">[]</font>segredos<font size="-1">[]</font>que<font size="-1">[]</font>nao...<font size="-1">\n
</font>2<font size="-1">\n
</font>Num<font size="-1">[]</font>ultimo<font size="-1">[]</font>espasmo<font size="-1">[]</font>de<font size="-1">[]</font>coragem,<font size="-1">[]</font>ou<font size="-1">[]</font>loucura,<font size="-1">[]</font>lanca-se<font size="-1">[]</font>para<font size="-1">[]</font>a<font size="-1">\n
</font>escuridao<font size="-1">[]</font>gotejante<font size="-1">[]</font>da<font size="-1">[]</font>gruta,<font size="-1">[]</font>fugindo<font size="-1">[]</font>no<font size="-1">[]</font>panico<font size="-1">[]</font>cego<font size="-1">[]</font>da<font size="-1">[]</font>criatura...<font size="-1">\n
</font>FAILED<font size="-1">\n
</font>WON<font size="-1">\n
</font></pre></td>
<td valign="top"><pre>Debug<font size="-1">[]</font>Info:<font size="-1">[]</font>Testing<font size="-1">[]</font>constructor<font size="-1">[]</font>and<font size="-1">[]</font>simpler<font size="-1">[]</font>getters<font size="-1">\n
</font>0<font size="-1">\n
</font>NORMAL<font size="-1">\n
</font>A<font size="-1">[]</font>sua<font size="-1">[]</font>aventura,<font size="-1">[]</font>tal<font size="-1">[]</font>como<font size="-1">[]</font>a<font size="-1">[]</font>sua<font size="-1">[]</font>sanidade,<font size="-1">[]</font>chegou<font size="-1">[]</font>a<font size="-1">[]</font>um<font size="-1">[]</font>cruzamento.<font size="-1">\n
</font>a<font size="-1">[]</font>direita,<font size="-1">[]</font>a<font size="-1">[]</font>floresta<font size="-1">[]</font>das<font size="-1">[]</font>Sombras<font size="-1">[]</font>Eternas<font size="-1">[]</font>sussurra<font size="-1">[]</font>segredos<font size="-1">[]</font>que<font size="-1">[]</font>nao...<font size="-1">\n
</font>2<font size="-1">\n
</font>Num<font size="-1">[]</font>ultimo<font size="-1">[]</font>espasmo<font size="-1">[]</font>de<font size="-1">[]</font>coragem,<font size="-1">[]</font>ou<font size="-1">[]</font>loucura,<font size="-1">[]</font>lanca-se<font size="-1">[]</font>para<font size="-1">[]</font>a<font size="-1">\n
</font>escuridao<font size="-1">[]</font>gotejante<font size="-1">[]</font>da<font size="-1">[]</font>gruta,<font size="-1">[]</font>fugindo<font size="-1">[]</font>no<font size="-1">[]</font>panico<font size="-1">[]</font>cego<font size="-1">[]</font>da<font size="-1">[]</font>criatura...<font size="-1">\n
</font>FAILED<font size="-1">\n
</font>WON<font size="-1">\n
</font></pre></td>
<td valign="top"><pre>Debug<font size="-1">[]</font>Info:<font size="-1">[]</font>Testing<font size="-1">[]</font>constructor<font size="-1">[]</font>and<font size="-1">[]</font>simpler<font size="-1">[]</font>getters<font size="-1">\n
</font>0<font size="-1">\n
</font>NORMAL<font size="-1">\n
</font>A<font size="-1">[]</font>sua<font size="-1">[]</font>aventura,<font size="-1">[]</font>tal<font size="-1">[]</font>como<font size="-1">[]</font>a<font size="-1">[]</font>sua<font size="-1">[]</font>sanidade,<font size="-1">[]</font>chegou<font size="-1">[]</font>a<font size="-1">[]</font>um<font size="-1">[]</font>cruzamento.<font size="-1">\n
</font>a<font size="-1">[]</font>direita,<font size="-1">[]</font>a<font size="-1">[]</font>floresta<font size="-1">[]</font>das<font size="-1">[]</font>Sombras<font size="-1">[]</font>Eternas<font size="-1">[]</font>sussurra<font size="-1">[]</font>segredos<font size="-1">[]</font>que<font size="-1">[]</font>nao...<font size="-1">\n
</font>2<font size="-1">\n
</font>Num<font size="-1">[]</font>ultimo<font size="-1">[]</font>espasmo<font size="-1">[]</font>de<font size="-1">[]</font>coragem,<font size="-1">[]</font>ou<font size="-1">[]</font>loucura,<font size="-1">[]</font>lanca-se<font size="-1">[]</font>para<font size="-1">[]</font>a<font size="-1">\n
</font>escuridao<font size="-1">[]</font>gotejante<font size="-1">[]</font>da<font size="-1">[]</font>gruta,<font size="-1">[]</font>fugindo<font size="-1">[]</font>no<font size="-1">[]</font>panico<font size="-1">[]</font>cego<font size="-1">[]</font>da<font size="-1">[]</font>criatura...<font size="-1">\n
</font>FAILED<font size="-1">\n
</font>WON<font size="-1">\n
</font></pre></td>
</tr><tr>
<td valign="top">
<a href="?inspect+/home/dshak/data/contests/AED25P1/problems/B/tests/testB02">
testB02
</a><br>
T=0.092 sec<br>
E=0 sec<br>
M=183668 Kb<br>
<br>
</td>
<td valign="top"><pre>Debug<font size="-1">[]</font>Info:<font size="-1">[]</font>Testing<font size="-1">[]</font>adding<font size="-1">[]</font>and<font size="-1">[]</font>getting<font size="-1">[]</font>options<font size="-1">\n
</font>true<font size="-1">\n
</font>false<font size="-1">\n
</font>true<font size="-1">\n
</font>true<font size="-1">\n
</font>true<font size="-1">\n
</font>+<font size="-1">[]</font>1.<font size="-1">[]</font>Ir<font size="-1">[]</font>para<font size="-1">[]</font>a<font size="-1">[]</font>floresta.<font size="-1">\n
</font>+<font size="-1">[]</font>2.<font size="-1">[]</font>Ir<font size="-1">[]</font>para<font size="-1">[]</font>a<font size="-1">[]</font>floresta.<font size="-1">\n
</font>+<font size="-1">[]</font>3.<font size="-1">[]</font>Ir<font size="-1">[]</font>para<font size="-1">[]</font>o<font size="-1">[]</font>deserto.<font size="-1">\n
</font>+<font size="-1">[]</font>4.<font size="-1">[]</font>Dormir<font size="-1">[]</font>uma<font size="-1">[]</font>soneca.<font size="-1">\n
</font></pre></td>
<td valign="top"><pre>Debug<font size="-1">[]</font>Info:<font size="-1">[]</font>Testing<font size="-1">[]</font>adding<font size="-1">[]</font>and<font size="-1">[]</font>getting<font size="-1">[]</font>options<font size="-1">\n
</font>true<font size="-1">\n
</font>false<font size="-1">\n
</font>true<font size="-1">\n
</font>true<font size="-1">\n
</font>true<font size="-1">\n
</font>+<font size="-1">[]</font>1.<font size="-1">[]</font>Ir<font size="-1">[]</font>para<font size="-1">[]</font>a<font size="-1">[]</font>floresta.<font size="-1">\n
</font>+<font size="-1">[]</font>2.<font size="-1">[]</font>Ir<font size="-1">[]</font>para<font size="-1">[]</font>a<font size="-1">[]</font>floresta.<font size="-1">\n
</font>+<font size="-1">[]</font>3.<font size="-1">[]</font>Ir<font size="-1">[]</font>para<font size="-1">[]</font>o<font size="-1">[]</font>deserto.<font size="-1">\n
</font>+<font size="-1">[]</font>4.<font size="-1">[]</font>Dormir<font size="-1">[]</font>uma<font size="-1">[]</font>soneca.<font size="-1">\n
</font></pre></td>
<td valign="top"><pre>Debug<font size="-1">[]</font>Info:<font size="-1">[]</font>Testing<font size="-1">[]</font>adding<font size="-1">[]</font>and<font size="-1">[]</font>getting<font size="-1">[]</font>options<font size="-1">\n
</font>true<font size="-1">\n
</font>false<font size="-1">\n
</font>true<font size="-1">\n
</font>true<font size="-1">\n
</font>true<font size="-1">\n
</font>+<font size="-1">[]</font>1.<font size="-1">[]</font>Ir<font size="-1">[]</font>para<font size="-1">[]</font>a<font size="-1">[]</font>floresta.<font size="-1">\n
</font>+<font size="-1">[]</font>2.<font size="-1">[]</font>Ir<font size="-1">[]</font>para<font size="-1">[]</font>a<font size="-1">[]</font>floresta.<font size="-1">\n
</font>+<font size="-1">[]</font>3.<font size="-1">[]</font>Ir<font size="-1">[]</font>para<font size="-1">[]</font>o<font size="-1">[]</font>deserto.<font size="-1">\n
</font>+<font size="-1">[]</font>4.<font size="-1">[]</font>Dormir<font size="-1">[]</font>uma<font size="-1">[]</font>soneca.<font size="-1">\n
</font></pre></td>
</tr><tr>
<td valign="top">
<a href="?inspect+/home/dshak/data/contests/AED25P1/problems/B/tests/testB03">
testB03
</a><br>
T=0.066 sec<br>
E=0 sec<br>
M=183844 Kb<br>
<font color="red">Wrong Answer</font><br>
</td>
<td valign="top"><pre><font color="orange"><i>Output demasiado longo: truncado</i></font>
Debug Info: Testing toString
[0]
A sua aventura, tal como a sua sanidade, chegou a um cruzamento.
a direita, a floresta das Sombras Eternas sussurra segredos que nao...
+ 1. Ir para a floresta.
+ 2. Ir para o deserto.
+ 3. Dormir uma soneca.
[2]
Num ultimo espasmo de coragem, ou loucura, lanca-se para a
escuridao gotejante da gruta, fugindo no panico cego da criatura...
<FAILED>
[3]
A lamina treme nas suas maos, ou sera o mundo que treme? Com um
grito que ja nao e de medo, mas de furia ancestral,...</pre></td>
<td valign="top"><pre><font color="orange"><i>Output demasiado longo: truncado</i></font>
Debug Info: Testing toString
[0]
A sua aventura, tal como a sua sanidade, chegou a um cruzamento.
a direita, a floresta das Sombras Eternas sussurra segredos que nao...
1. Ir para a floresta.
2. Ir para o deserto.
3. Dormir uma soneca.
[2]
Num ultimo espasmo de coragem, ou loucura, lanca-se para a
escuridao gotejante da gruta, fugindo no panico cego da criatura...
[3]
A lamina treme nas suas maos, ou sera o mundo que treme? Com um
grito que ja nao e de medo, mas de furia ancestral, desce o golpe....</pre></td>
<td valign="top"><pre>5,7c5,7
< + 1. Ir para a floresta.
< + 2. Ir para o deserto.
< + 3. Dormir uma soneca.
---
> 1. Ir para a floresta.
> 2. Ir para o deserto.
> 3. Dormir uma soneca.
11d10
< <FAILED>
15d13
< <WON>
</pre></td>
</tr><tr>
<td valign="top">
<a href="?inspect+/home/dshak/data/contests/AED25P1/problems/B/tests/testB04">
testB04
</a><br>
T=0.072 sec<br>
E=0 sec<br>
M=183940 Kb<br>
<font color="red">Wrong Answer</font><br>
</td>
<td valign="top"><pre><font color="orange"><i>Output demasiado longo: truncado</i></font>
Debug Info: Testing parse with final scenes
[2]
Num ultimo espasmo de coragem, ou loucura, lanca-se para a
escuridao gotejante da gruta, fugindo no panico cego da criatura
cujo bafo putrido ja aquece a sua nuca como um pressagio do fim.
Mas e inutil. Ela conhece todos os seus recantos como se fosse a
luz negra da sua alma. A gruta e dela. Sempre foi. E agora, tambem
e sua. Garras surgem das trevas e, num unico movimento bruto,
rasgam-no em dois, num terror estupefacto, sem um unico grito. So
visc...</pre></td>
<td valign="top"><pre>Debug<font size="-1">[]</font>Info:<font size="-1">[]</font>Testing<font size="-1">[]</font>parse<font size="-1">[]</font>with<font size="-1">[]</font>final<font size="-1">[]</font>scenes<font size="-1">\n
</font>Unexpected<font size="-1">[]</font>exception<font size="-1">[]</font>was<font size="-1">[]</font>thrown.<font size="-1">\n
</font></pre></td>
<td valign="top"><pre><font color="orange"><i>Output demasiado longo: truncado</i></font>
2,16c2
< [2]
< Num ultimo espasmo de coragem, ou loucura, lanca-se para a
< escuridao gotejante da gruta, fugindo no panico cego da criatura
< cujo bafo putrido ja aquece a sua nuca como um pressagio do fim.
< Mas e inutil. Ela conhece todos os seus recantos como se fosse a
< luz negra da sua alma. A gruta e dela. Sempre foi. E agora, tambem
< e sua. Garras surgem das trevas e, num unico movimento bruto,
< rasgam-no em dois, num terror estupefacto, sem um unico grito. So
< visceras.
< Morreu.
< <...</pre></td>
</tr><tr>
<td valign="top">
<a href="?inspect+/home/dshak/data/contests/AED25P1/problems/B/tests/testB05">
testB05
</a><br>
T=0.078 sec<br>
E=0 sec<br>
M=183764 Kb<br>
<font color="red">Wrong Answer</font><br>
</td>
<td valign="top"><pre><font color="orange"><i>Output demasiado longo: truncado</i></font>
Debug Info: Testing parse with exceptions and normal scenes
[0]
A sua aventura, tal como a sua sanidade, chegou a um cruzamento.
A direita, a floresta, e a esquerda o deserto
+ 1. Seguir para a floresta
+ 2. Seguir para o deserto
+ 3. Dormir uma soneca
[234]
Chegou a uma festa no palacio. O que quer fazer?
+ 120. Cumprimentar a Rainha
+ 203. Dancar no baile
+ 205. Subir sorrateiramente ao 1 andar
+ 250. Acusar publicamente o visconde de ter um plano para raptar a princesa
+ 254. Comer desalmadame...</pre></td>
<td valign="top"><pre><font color="orange"><i>Output demasiado longo: truncado</i></font>
Debug Info: Testing parse with exceptions and normal scenes
[0]
A sua aventura, tal como a sua sanidade, chegou a um cruzamento.
A direita, a floresta, e a esquerda o deserto
1. Seguir para a floresta
2. Seguir para o deserto
3. Dormir uma soneca
[234]
Chegou a uma festa no palacio. O que quer fazer?
120. Cumprimentar a Rainha
203. Dancar no baile
205. Subir sorrateiramente ao 1 andar
250. Acusar publicamente o visconde de ter um plano para raptar a princesa
254. Comer desalmadamente no buffet
25...</pre></td>
<td valign="top"><pre><font color="orange"><i>Output demasiado longo: truncado</i></font>
5,7c5,7
< + 1. Seguir para a floresta
< + 2. Seguir para o deserto
< + 3. Dormir uma soneca
---
> 1. Seguir para a floresta
> 2. Seguir para o deserto
> 3. Dormir uma soneca
10,17c10,17
< + 120. Cumprimentar a Rainha
< + 203. Dancar no baile
< + 205. Subir sorrateiramente ao 1 andar
< + 250. Acusar publicamente o visconde de ter um plano para raptar a princesa
< + 254. Comer desalmadamente no buffet
< + 258. Beber um belo vinho
< + 213. Dizer que esta indisposto e sair
< + 246. If falar com a sua...</pre></td>
</tr></table>
<p><table>
<tr>	<th>CPU	  </th><td>0.092 (0) sec</td>	</tr>
<tr>	<th>Memory	  </th><td>183940 kbytes</td>			</tr>
<tr>	<th>Classification</th><td>Wrong Answer</td>		</tr>
<tr>	<th>Mark</th>	  <td>2</td>		</tr>
<tr>
<th valign="top">Observations</th>
<td><pre></pre></td>
</tr>
<tr>
<th valign="top">Feedback</th>
<td><pre></pre></td>
</tr>

<tr>
<th>Code</th>
<td></td>
</table>
<pre>
import java.io.BufferedReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Iterator;
import java.util.List;

public class Scene {

    public enum Type { NORMAL, WON, FAILED }

    private final int id;
    private final String description;
    private final Type type;
    private final ArrayList&lt;Option&gt; options;

    public Scene(int id, String description, Type type) {
        if (description == null) throw new IllegalArgumentException("description cannot be null");
        if (type == null)        throw new IllegalArgumentException("type cannot be null");
        this.id = id;
        this.description = description;
        this.type = type;
        this.options = new ArrayList&lt;&gt;();
    }

    public int getId() { return id; }
    public String getDescription() { return description; }
    public Type getType() { return type; }

    /** Iterable não modificável das opções (apenas leitura). */
    public Iterable&lt;Option&gt; getOptions() {
        final List&lt;Option&gt; ro = Collections.unmodifiableList(options);
        return new Iterable&lt;Option&gt;() {
            @Override public Iterator&lt;Option&gt; iterator() { return ro.iterator(); }
        };
    }

    /** Só adiciona em cenas NORMAL; falha se já existir uma opção com o mesmo id. */
    public boolean addOption(Option o) {
        if (o == null || type != Type.NORMAL) return false;
        int nid = o.getId();
        for (Option p : options) if (p.getId() == nid) return false;
        options.add(o);
        return true;
    }

    /**
     * Formato:
     * [id]
     * &lt;descrição&gt;
     * 1. &lt;desc&gt;
     * 2. &lt;desc&gt;
     * ...
     * (em cenas finais imprime apenas a descrição; nenhum marcador extra)
     * Sem newline a mais no fim.
     */
    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder(64);
        sb.append('[').append(id).append(']').append('\n');
        sb.append(description);
        if (type == Type.WON || type == Type.FAILED) {
            // final scenes: apenas a descrição (sem newline final)
            return sb.toString();
        }
        // cena NORMAL: quebra de linha antes das opções
        sb.append('\n');
        for (int i = 0; i &lt; options.size(); i++) {
            Option op = options.get(i);
            sb.append(op.getId()).append(". ").append(op.getDescription());
            if (i &lt; options.size() - 1) sb.append('\n'); // sem \n extra no fim
        }
        return sb.toString();
    }

    /**
     * Parser:
     * [id]
     * &lt;&lt;&lt;
     * (linhas de descrição)
     * &gt;&gt;&gt;          | &gt;&gt;&gt;WON | &gt;&gt;&gt;FAILED
     * [se NORMAL]
     * ***
     * + &lt;id&gt;. &lt;desc&gt;
     * ...
     * ***
     * Não fecha o reader.
     */
    public static Scene parseScene(BufferedReader br) throws IOException, NumberFormatException {
        String line;

        // --- [id] : pode haver linhas vazias antes ---
        do {
            line = br.readLine();
            if (line == null) throw new IOException("unexpected EOF reading scene id");
            line = line.trim();
        } while (line.isEmpty());

        if (line.length() &lt; 2 || line.charAt(0) != '[' || line.charAt(line.length() - 1) != ']')
            throw new NumberFormatException("invalid scene id line");
        int id = Integer.parseInt(line.substring(1, line.length() - 1).trim());

        // --- &lt;&lt;&lt; ---
        line = br.readLine();
        if (line == null) throw new IOException("unexpected EOF reading &lt;&lt;&lt;");
        if (!line.trim().equals("&lt;&lt;&lt;")) throw new IOException("expected &lt;&lt;&lt;");

        // --- descrição até &gt;&gt;&gt; / &gt;&gt;&gt;WON / &gt;&gt;&gt;FAILED ---
        StringBuilder desc = new StringBuilder();
        Type type = Type.NORMAL;

        while (true) {
            line = br.readLine();
            if (line == null) throw new IOException("unexpected EOF reading description");
            String t = line.trim();
            if (t.equals("&gt;&gt;&gt;")) { type = Type.NORMAL; break; }
            if (t.equals("&gt;&gt;&gt;WON")) { type = Type.WON; break; }
            if (t.equals("&gt;&gt;&gt;FAILED")) { type = Type.FAILED; break; }
            if (desc.length() &gt; 0) desc.append('\n');
            desc.append(line);
        }

        Scene scene = new Scene(id, desc.toString(), type);
        if (type != Type.NORMAL) {
            // cenas finais não têm bloco de opções
            return scene;
        }

        // --- *** (abre opções) ---
        line = br.readLine();
        if (line == null) throw new IOException("unexpected EOF reading options start");
        if (!line.trim().equals("***")) throw new IOException("expected *** (options start)");

        // --- opções até *** ---
        while (true) {
            line = br.readLine();
            if (line == null) throw new IOException("unexpected EOF reading options");
            String t = line.trim();
            if (t.equals("***")) break; // fim das opções
            scene.addOption(Option.parseOption(line)); // ignora ids duplicados (retorna false)
        }

        return scene;
    }
}

</pre>

</body>